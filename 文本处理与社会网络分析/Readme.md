# 文本处理与社会网络分析
![](https://img.shields.io/badge/python-3.6-brightgreen)
## 1 特征词筛选

​	 微博作为大众社交媒体，人们在利用微博发布消息或评论时经常存在文本无意义和内容发散的现象，增加了主题概括的难度，需要从原始词表中筛选出最重要的词汇作为特征词。与文本中的其它成份相比，名词和动词更能够解释微博中所讨论的话题，因此，将每条微博进行分词、去掉停用词操作后，只保留长度大于1的名词和动词，构成词列表$W_{list}$ .设微博信息总条数为$N$，统计$N$条微博的总词数记为$C_N$，*N*条微博中词$w$出现的频数记为$C_w$,包含词$w$的微博条数记为$N_w$，定义词$w$的词频特征表示为$C_w/C_N$,可以反映特征词的重要程度；定义词$w$的文档特征表示为$N_w/N$，对于原创微博信息而言，同一特征词出现在越多的微博文本中，表明越多的用户使用此特征词，因而，文档特征可反映不同用户对同一特征词的偏好程度。本文针对词列表中的每个词综合考虑词频特征和文档特征，保留满足如式1所示条件的词构成特征词集合：

​                                          (1)

其中*α*、*β*表示筛选阈值。
## 2 构建词共现网络 

在获得特征词集合后，基于特征词出现的位置和频数构建词共现网络图[17]。设图  为一加权无向图，其中，  表示节点集，由3.1节所获得特征词组成；  表示边集，如果两个特征词  至少同时出现在一条微博中，则在这两个特征词之间建立一条边  ，从边集中可以反映出特征词的共现关系；*W*表示图*G*中边集*E*所对应的权重矩阵，考虑到特征词  相伴出现的次数对语义分析的影响，需要赋予边  相应的权重，同时为保证权重矩阵*W*的对称性，令：

​           (2)

其中，  即为边  的权重，  、  、  分别表示特征词  ，  共现的次数以及特征词  和  各自出现的次数。
## 3 话题社区划分    
根据语言学的特点，人们在阐述问题时，相同话题对应的词汇表述更为相近，而不同话题对应的词汇表述存在差异。这种现象反映在特征词共现网络中即表现为：相同话题特征词之间联系紧密，而与其它话题联系稀疏。相同话题的特征词联系紧密，不同话题之间特征词联系稀疏。鉴于社会网络中社区发现的思想有助于探测网络内部的隐藏规律和拓扑结构，为有效识别出特征词共现网络中存在的事件，本文采用Louvain算法实现舆情事件社区发现。**另外，感兴趣的同学可以尝试覃悦师兄分享的[谱聚类算法](https://github.com/QinY-Stat/CommunityDetection).** Louvain算法是一种基于多层次优化模块度的算法，能够刻画社区的紧密程度，得到不同规模的社区结构。经过Louvain算法获得多个话题社区，为增加每个话题社区的概括性并解决不同社区之间交叉特征词过多的问题，需要进行话题的主题抽取。首先，针对每一个话题社区，利用Kruskal算法得到每个社区的最小生成子树，然后，综合考虑特征词节点的度（Degree）、介数中心性（Betweenness）和PageRank值计算特征词的重要性。

